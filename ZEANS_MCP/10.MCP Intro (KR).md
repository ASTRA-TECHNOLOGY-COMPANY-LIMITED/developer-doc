# Model Context Protocol (MCP) ê°œìš” ë° í”„ë¡œí† ì½œ ìƒì„¸

ì´ ë¬¸ì„œëŠ” Model Context Protocol(MCP)ì˜ ê¸°ë³¸ ê°œë…, êµ¬ì„± ìš”ì†Œ(í˜¸ìŠ¤íŠ¸, í´ë¼ì´ì–¸íŠ¸, ì„œë²„)ì™€ ë©”ì‹œì§€ ìŠ¤í‚¤ë§ˆ, ê·¸ë¦¬ê³  í”„ë¡œí† ì½œ íë¦„ì„ ì„¤ëª…í•©ë‹ˆë‹¤. ë˜í•œ, ì´ë¥¼ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ” SDK ë° ì˜¤í”ˆì†ŒìŠ¤ ì˜ˆì œì— ëŒ€í•´ì„œë„ ê°„ëžµí•˜ê²Œ ë‹¤ë£¹ë‹ˆë‹¤.

---

## ëª©ì°¨

1. [MCP ê°œìš”](#mcp-ê°œìš”)
2. [ì—­í•  êµ¬ë¶„: í˜¸ìŠ¤íŠ¸, í´ë¼ì´ì–¸íŠ¸, ì„œë²„](#ì—­í• -êµ¬ë¶„-í˜¸ìŠ¤íŠ¸-í´ë¼ì´ì–¸íŠ¸-ì„œë²„)
3. [MCP ë©”ì‹œì§€ ìŠ¤í‚¤ë§ˆ](#mcp-ë©”ì‹œì§€-ìŠ¤í‚¤ë§ˆ)
    - [JSON-RPC ê¸°ë°˜ êµ¬ì¡°](#json-rpc-ê¸°ë°˜-êµ¬ì¡°)
    - [ì£¼ìš” ë©”ì‹œì§€ ìœ í˜• ë° ì˜ˆì‹œ](#ì£¼ìš”-ë©”ì‹œì§€-ìœ í˜•-ë°-ì˜ˆì‹œ)
        - [ì´ˆê¸°í™” ë° ì„¸ì…˜ ê´€ë¦¬](#ì´ˆê¸°í™”-ë°-ì„¸ì…˜-ê´€ë¦¬)
        - [í”„ë¡¬í”„íŠ¸ ê´€ë ¨ ë©”ì‹œì§€](#í”„ë¡¬í”„íŠ¸-ê´€ë ¨-ë©”ì‹œì§€)
        - [ë¦¬ì†ŒìŠ¤ ê´€ë ¨ ë©”ì‹œì§€](#ë¦¬ì†ŒìŠ¤-ê´€ë ¨-ë©”ì‹œì§€)
        - [íˆ´(ë„êµ¬) ê´€ë ¨ ë©”ì‹œì§€](#íˆ´ë„êµ¬-ê´€ë ¨-ë©”ì‹œì§€)
        - [LLM ì‘ë‹µ ìƒì„± (ìƒ˜í”Œë§)](#llm-ì‘ë‹µ-ìƒì„±-ìƒ˜í”Œë§)
        - [ë£¨íŠ¸ ê´€ë ¨ ë©”ì‹œì§€](#ë£¨íŠ¸-ê´€ë ¨-ë©”ì‹œì§€)
4. [í”„ë¡œí† ì½œ í”Œë¡œìš° (Flowchart)](#í”„ë¡œí† ì½œ-í”Œë¡œìš°-flowchart)
5. [SDK ë° ì˜¤í”ˆì†ŒìŠ¤ ë„êµ¬](#sdk-ë°-ì˜¤í”ˆì†ŒìŠ¤-ë„êµ¬)

---

## MCP ê°œìš”

Model Context Protocol(MCP)ëŠ” ëŒ€í˜• ì–¸ì–´ ëª¨ë¸(LLM)ê³¼ ì™¸ë¶€ ë°ì´í„° ì†ŒìŠ¤ ë˜ëŠ” ë„êµ¬(íŒŒì¼ ì‹œìŠ¤í…œ, ë°ì´í„°ë² ì´ìŠ¤, API ë“±)ë¥¼ ì—°ê²°í•˜ê¸° ìœ„í•œ **í‘œì¤€í™”ëœ í†µì‹  í”„ë¡œí† ì½œ**ìž…ë‹ˆë‹¤.  
ì£¼ìš” ëª©ì ì€ LLM ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í•„ìš”í•œ ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸(ë°ì´í„°, í”„ë¡¬í”„íŠ¸, ë„êµ¬ ê²°ê³¼ ë“±)ë¥¼ í‘œì¤€í™”ëœ ë°©ì‹ìœ¼ë¡œ ì „ë‹¬ë°›ì„ ìˆ˜ ìžˆë„ë¡ í•˜ëŠ” ë° ìžˆìŠµë‹ˆë‹¤.

---

## ì—­í•  êµ¬ë¶„: í˜¸ìŠ¤íŠ¸, í´ë¼ì´ì–¸íŠ¸, ì„œë²„

-   **í˜¸ìŠ¤íŠ¸ (Host)**

    -   **ì •ì˜:** LLM ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‚˜ ë„êµ¬(ì˜ˆ: AI ì±—ë´‡, IDE í™•ìž¥ ë“±) ìžì²´ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
    -   **ì—­í• :** ì „ì²´ ìš”ì²­ì„ ì¡°ìœ¨í•˜ê³ , ì™¸ë¶€ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìˆ˜ì§‘í•˜ì—¬ ëª¨ë¸ì—ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤.

-   **í´ë¼ì´ì–¸íŠ¸ (Client)**

    -   **ì •ì˜:** í˜¸ìŠ¤íŠ¸ ë‚´ì— ì¡´ìž¬í•˜ëŠ” MCP ì „ìš© í†µì‹  ëª¨ë“ˆë¡œ, MCP ì„œë²„ì™€ì˜ JSON-RPC ë©”ì‹œì§€ êµí™˜ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
    -   **ì—­í• :** í˜¸ìŠ¤íŠ¸ì™€ MCP ì„œë²„ ê°„ì˜ ì—°ê²°ì„ ê´€ë¦¬í•˜ê³ , ìš”ì²­/ì‘ë‹µ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.

-   **ì„œë²„ (Server)**

    -   **ì •ì˜:** ì™¸ë¶€ ë°ì´í„°ë‚˜ ë„êµ¬(ì˜ˆ: íŒŒì¼ ì‹œìŠ¤í…œ, API, Vision ëª¨ë¸ ë“±)ë¥¼ MCP ì¸í„°íŽ˜ì´ìŠ¤ë¡œ ë…¸ì¶œí•˜ëŠ” ì„œë¹„ìŠ¤ìž…ë‹ˆë‹¤.
    -   **ì—­í• :** LLMì— ì „ë‹¬í•  ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ê±°ë‚˜, ë°ì´í„°ë¥¼ ê°€ê³µí•˜ì—¬ ì œê³µí•˜ëŠ” "ì •ë³´ ê³µê¸‰ìž"ìž…ë‹ˆë‹¤.

-   **MCP êµ¬ì„± ìš”ì†Œ ì—­í•  ì •ë¦¬**

| ì»´í¬ë„ŒíŠ¸                    | ì—­í•  ì„¤ëª…                                                                          |
| --------------------------- | ---------------------------------------------------------------------------------- |
| **MCP í˜¸ìŠ¤íŠ¸ (Host)**       | ðŸ§  ì‚¬ìš©ìžì˜ ìžì—°ì–´ ìš”ì²­ì„ í•´ì„í•˜ê³ , ê·¸ì— ë§žëŠ” MCP ì„œë²„ ë° í”„ë¡¬í”„íŠ¸ë¥¼ **ì„ íƒ/ì¡°í•©** |
| **MCP í´ë¼ì´ì–¸íŠ¸ (Client)** | ðŸ”Œ MCP í”„ë¡œí† ì½œ ê¸°ë°˜ìœ¼ë¡œ ì„œë²„ì— ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ê³ , ì‘ë‹µì„ ë°›ì•„ì˜¤ëŠ” **í†µì‹  ë‹´ë‹¹ìž** |
| **MCP ì„œë²„ (Server)**       | ðŸ“¦ í”„ë¡¬í”„íŠ¸, íˆ´, ë¦¬ì†ŒìŠ¤ ë“±ì„ ì •ì˜í•˜ê³  ì œê³µí•˜ëŠ” **ë°ì´í„°/ê¸°ëŠ¥ ì œê³µìž**              |

> **ì˜ˆì‹œ (ëª¨ë°”ì¼ ì•± ê¸°ë°˜ ì‚¬ì§„ ë¶„ì„ ì•±)**
>
> -   **ëª¨ë°”ì¼ ì•± (í”„ë¡ íŠ¸ì—”ë“œ):** ë‹¨ìˆœ ì‚¬ìš©ìž ì¸í„°íŽ˜ì´ìŠ¤ ì—­í• , MCP êµ¬ì¡°ì— ì§ì ‘ í¬í•¨ë˜ì§€ ì•ŠìŒ
> -   **ë°±ì—”ë“œ ì„œë²„:** MCP **í˜¸ìŠ¤íŠ¸**ì´ìž ë‚´ë¶€ì ìœ¼ë¡œ MCP **í´ë¼ì´ì–¸íŠ¸**ë¥¼ í†µí•´ ì™¸ë¶€(ì˜ˆ: ì‚¬ì§„ ì €ìž¥ì†Œ MCP ì„œë²„)ì™€ í†µì‹ 
> -   **ì‚¬ì§„ ì €ìž¥ì†Œ/ë¶„ì„ ì„œë²„:** ì‚¬ì§„ ë©”íƒ€ë°ì´í„°ë‚˜ Vision ëª¨ë¸ ê²°ê³¼ë¥¼ ì œê³µí•˜ëŠ” MCP **ì„œë²„**

---

## MCP ë©”ì‹œì§€ ìŠ¤í‚¤ë§ˆ

MCPëŠ” JSON-RPC 2.0 í‘œì¤€ì— ê¸°ë°˜í•˜ì—¬ ë©”ì‹œì§€ë“¤ì„ ì£¼ê³ ë°›ìŠµë‹ˆë‹¤. ëª¨ë“  ë©”ì‹œì§€ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê¸°ë³¸ êµ¬ì¡°ë¥¼ ê°€ì§‘ë‹ˆë‹¤.

### JSON-RPC ê¸°ë°˜ êµ¬ì¡°

-   **ê³µí†µ í•„ë“œ:**
    -   `"jsonrpc": "2.0"`
    -   ìš”ì²­(Request)ì—ëŠ” `"id"`, `"method"`, `"params"` í•„ë“œê°€ í¬í•¨ë¨
    -   ì‘ë‹µ(Response)ì—ëŠ” ìš”ì²­ì˜ `"id"`ì™€ í•¨ê»˜ `"result"` ë˜ëŠ” `"error"` í•„ë“œê°€ í¬í•¨ë¨
    -   ì•Œë¦¼(Notification)ì€ `"id"` ì—†ì´ ì „ì†¡ë˜ë©° ì‘ë‹µì´ ì—†ìŒ

### ì£¼ìš” ë©”ì‹œì§€ ìœ í˜• ë° ì˜ˆì‹œ

#### ì´ˆê¸°í™” ë° ì„¸ì…˜ ê´€ë¦¬

-   **ì´ˆê¸°í™” ìš”ì²­ (`initialize`):**  
    í´ë¼ì´ì–¸íŠ¸ê°€ ì§€ì›í•˜ëŠ” í”„ë¡œí† ì½œ ë²„ì „, ê¸°ëŠ¥(capabilities) ë° í´ë¼ì´ì–¸íŠ¸ ì •ë³´ë¥¼ í¬í•¨í•˜ì—¬ ì„œë²„ì— ì´ˆê¸° ì—°ê²°ì„ ìš”ì²­í•©ë‹ˆë‹¤.

    ```json
    {
        "jsonrpc": "2.0",
        "id": "init1",
        "method": "initialize",
        "params": {
            "protocolVersion": "2024-11-05",
            "capabilities": { "roots": { "listChanged": true }, "sampling": {} },
            "clientInfo": { "name": "SomeClient", "version": "1.2.3" }
        }
    }
    ```

-   **ì´ˆê¸°í™” ì‘ë‹µ:**
    ```json
    {
        "jsonrpc": "2.0",
        "id": "init1",
        "result": {
            "protocolVersion": "2024-11-05",
            "capabilities": { "prompts": { "listChanged": true }, "tools": {} },
            "serverInfo": { "name": "MyServer", "version": "0.8.15" }
        }
    }
    ```

#### í”„ë¡¬í”„íŠ¸ ê´€ë ¨ ë©”ì‹œì§€

-   **í”„ë¡¬í”„íŠ¸ ëª©ë¡ ì¡°íšŒ (prompts/list):**
    ```json
    {
        "jsonrpc": "2.0",
        "id": 1,
        "method": "prompts/list",
        "params": { "cursor": "optional-cursor-value" }
    }
    ```
-   **í”„ë¡¬í”„íŠ¸ ëª©ë¡ ì¡°íšŒ ì‘ë‹µ:**

    ```json
    {
        "jsonrpc": "2.0",
        "id": 1,
        "result": {
            "prompts": [
                {
                    "name": "code_review",
                    "description": "Analyze code quality and suggest improvements",
                    "arguments": [
                        {
                            "name": "code",
                            "description": "The source code to review",
                            "required": true
                        }
                    ]
                },
                {
                    "name": "summarize_text",
                    "description": "Summarize a given text document",
                    "arguments": [
                        {
                            "name": "text",
                            "description": "The text to summarize",
                            "required": true
                        }
                    ]
                }
            ],
            "nextCursor": null
        }
    }
    ```

-   **í”„ë¡¬í”„íŠ¸ ë‚´ìš© ì¡°íšŒ (prompts/get):**
    ```json
    {
        "jsonrpc": "2.0",
        "id": 2,
        "method": "prompts/get",
        "params": {
            "name": "code_review",
            "arguments": { "code": "def hello():\n    print('world')" }
        }
    }
    ```
-   **í”„ë¡¬í”„íŠ¸ ë‚´ìš© ì¡°íšŒ ì‘ë‹µ:**
    ```json
    {
        "jsonrpc": "2.0",
        "id": 2,
        "result": {
            "description": "Code review prompt",
            "messages": [
                {
                    "role": "user",
                    "content": {
                        "type": "text",
                        "text": "Please review the following code and suggest improvements:\n\n{{code}}"
                    }
                }
            ]
        }
    }
    ```

#### ë¦¬ì†ŒìŠ¤ ê´€ë ¨ ë©”ì‹œì§€

-   **ë¦¬ì†ŒìŠ¤ ëª©ë¡ ì¡°íšŒ (resources/list):**

    ```json
    {
        "jsonrpc": "2.0",
        "id": 10,
        "method": "resources/list",
        "params": { "cursor": "optional-cursor-value" }
    }
    ```

-   **ë¦¬ì†ŒìŠ¤ ì½ê¸° (resources/read):**

    ```json
    {
        "jsonrpc": "2.0",
        "id": 11,
        "method": "resources/read",
        "params": { "uri": "file:///project/src/main.rs" }
    }
    ```

#### íˆ´(ë„êµ¬) ê´€ë ¨ ë©”ì‹œì§€

-   **íˆ´ ëª©ë¡ ì¡°íšŒ (tools/list):**

    ```json
    {
        "jsonrpc": "2.0",
        "id": 20,
        "method": "tools/list",
        "params": { "cursor": "optional-cursor-value" }
    }
    ```

-   **íˆ´ í˜¸ì¶œ (tools/call):**

    ```json
    {
        "jsonrpc": "2.0",
        "id": 21,
        "method": "tools/call",
        "params": {
            "name": "get_weather",
            "arguments": { "location": "New York" }
        }
    }
    ```

#### LLM ì‘ë‹µ ìƒì„± (ìƒ˜í”Œë§; sampling/createMessage)

-   **LLM ë©”ì‹œì§€ ìƒì„± ìš”ì²­:**

    ```json
    {
        "jsonrpc": "2.0",
        "id": 5,
        "method": "sampling/createMessage",
        "params": {
            "messages": [
                {
                    "role": "user",
                    "content": { "type": "text", "text": "What is the capital of France?" }
                }
            ],
            "modelPreferences": {
                "hints": [{ "name": "claude-3-sonnet" }],
                "intelligencePriority": 0.8,
                "speedPriority": 0.5
            },
            "systemPrompt": "You are a helpful assistant.",
            "maxTokens": 100
        }
    }
    ```

-   **LLM ì‘ë‹µ ì˜ˆì‹œ:**

    ```json
    {
        "jsonrpc": "2.0",
        "id": 5,
        "result": {
            "role": "assistant",
            "content": { "type": "text", "text": "The capital of France is Paris." },
            "model": "claude-3-sonnet-20240307",
            "stopReason": "endTurn"
        }
    }
    ```

#### ë£¨íŠ¸ ê´€ë ¨ ë©”ì‹œì§€

-   **ë£¨íŠ¸ ëª©ë¡ ì¡°íšŒ (roots/list):**

    ```json
    {
        "jsonrpc": "2.0",
        "id": 30,
        "method": "roots/list"
    }
    ```

-   **ë£¨íŠ¸ ì‘ë‹µ ì˜ˆì‹œ:**

    ```json
    {
        "jsonrpc": "2.0",
        "id": 30,
        "result": {
            "roots": [{ "uri": "file:///home/user/projects/myproject", "name": "My Project" }]
        }
    }
    ```

## í”„ë¡œí† ì½œ í”Œë¡œìš° (Flowchart)

```mermaid
flowchart TD
    A[Client: Send initialize request]
    B[Server: Send initialization response]
    C[Client: Send initialization complete]
    D[Client: Request prompts/resources/tools list]
    E[Server: Send list response]
    F[Client: Call requested prompt/resource/tool]
    G[Client: Send sampling/createMessage request]
    H[Host: Compose message with external context]
    I[LLM: Generate response based on message and context]
    J[Client: Receive and deliver LLM response]

    A --> B
    B --> C
    C --> D
    D --> E
    E --> F
    F --> G
    G --> H
    H --> I
    I --> J
```
